<div style="text-align:center">
  <h1>Score</h1>
</div>

<h2>teams</h2>

<div *ngIf="userInfo">
  <table>
    <tr>
      <th>team name</th>
      <th>displayname</th>
      <th>uid</th>
      <th>gid</th>
    </tr>
    <tr *ngFor="let v of userInfo_sort(); let i = index">
      <td>{{v.username}}</td>
      <td>{{v.displayname}}</td>
      <td>{{v.uid}}</td>
      <td>{{v.gid}}</td>
    </tr>
  </table>
</div>

<div>
  <button title="Refresh score" (click)="refreshScore()">Refresh score</button>
</div>

<h2>Score board (total)</h2>

<div *ngIf="score_board">
  <table>
    <tr>
      <th>Qn \ team</th>
      <th *ngFor="let t of teams">{{t}}</th>
    </tr>
    <tr *ngFor="let v of score_board['/header/']; let i = index">
      <th>{{v}}</th>
      <td *ngFor="let t of teams">{{score_board[t][i] | number:'1.0-5'}}</td>
    </tr>
  </table>
</div>


<h2>OK point (正解ポイント)</h2>

<div *ngIf="ok_point">
  <table>
    <tr>
      <th>Qn \ team</th>
      <th *ngFor="let t of teams">{{t}}</th>
    </tr>
    <tr *ngFor="let row of ok_point; let i = index">
      <th>{{row[0]}}</th>
      <td *ngFor="let c of row.slice(1)">{{c}}</td>
    </tr>
  </table>
</div>


<h2>Quality point (品質ポイント)</h2>

<div *ngIf="q_point">
  <table>
    <tr>
      <th>Qn \ team</th>
      <th *ngFor="let t of teams">{{t}}</th>
    </tr>
    <tr *ngFor="let row of q_point; let i = index">
      <th>{{row[0]}}</th>
      <td *ngFor="let c of row.slice(1)">{{c | number:'1.0-5'}}</td>
    </tr>
  </table>
</div>


<h2>Bonus point (出題ボーナスポイント)</h2>

<div *ngIf="bonus_point">
  <table>
    <tr>
      <th>Qn \ team</th>
      <th *ngFor="let t of teams">{{t}}</th>
    </tr>
    <tr *ngFor="let row of bonus_point; let i = index">
      <th>{{row[0]}}</th>
      <td *ngFor="let c of row.slice(1)">{{c}}</td>
    </tr>
  </table>
</div>

<h2>Fastest point (最速回答ポイント)</h2>

<div *ngIf="fastest_point">
  <table>
    <tr>
      <th>Qn \ team</th>
      <th *ngFor="let t of teams">{{t}}</th>
    </tr>
    <tr *ngFor="let row of fastest_point; let i = index">
      <th>{{row[0]}}</th>
      <td *ngFor="let c of row.slice(1)">{{c}}</td>
    </tr>
  </table>
</div>

<h2>put-a date (回答時刻。正解時のみ)</h2>

<div *ngIf="put_a_date">
  <table>
    <tr>
      <th>Qn \ team</th>
      <th *ngFor="let t of teams">{{t}}</th>
    </tr>
    <tr *ngFor="let row of put_a_date; let i = index">
      <th>{{row[0]}}</th>
      <td *ngFor="let c of row.slice(1)"><span *ngIf="c != '0'">{{c | date: 'yyyy/MM/dd hh:mm:ss' }}</span></td>
    </tr>
  </table>
</div>


<h2>Viewer</h2>

<div *ngIf="ok_point">
  <table>
    <tr>
      <th>Qn \ team</th>
      <th *ngFor="let t of teams">{{t}}</th>
    </tr>
    <tr *ngFor="let row of ok_point; let i = index">
      <th>{{row[0]}}</th>
      <td *ngFor="let c of row.slice(1); let j = index">
        <button *ngIf="c==1" (click)="viewA(row[0], teams[j], i, j)">view</button>
      </td>
    </tr>
  </table>
</div>


<app-board-view [data]="boardData"></app-board-view>
